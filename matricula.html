<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matricula - Lingua Link</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .matricula-container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .matricula-container h2 {
            text-align: center;
            margin-bottom: 20px;
        }
        .form-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        .form-row > div {
            flex: 1;
            margin-right: 10px;
        }
        .form-row > div:last-child {
            margin-right: 0;
        }
        .matricula-container label {
            display: block;
            margin-bottom: 8px;
        }
        .matricula-container input,
        .matricula-container select {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .matricula-container button {
            width: 100%;
            padding: 15px;
            background-color: #FFB400;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .matricula-container button:hover {
            background-color: #FF9E00;
        }
        .check-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .check-container input {
            margin-right: 5px;
        }
        .form-row-name {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .form-row-name > div {
            margin-right: 10px;
            flex: 1;
        }
        .form-row-name > div:last-child {
            margin-right: 0;
        }
    </style>
</head>
<body>

<header>
    <nav>
        <div class="logo">
            <img src="imagens/logo.png" alt="Lingua Link Logo" style="height: 150px; border-radius: 10px;">
        </div>
        <ul>
            <li><a href="index.html">Início</a></li>
            <li><a href="sobre.html">Sobre Nós</a></li>
            <li><a href="cursos.html">Cursos</a></li>
            <li><a href="contato.html">Contato</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
    </nav>
</header>

<div class="matricula-container">
    <h2>Formulário de Matrícula</h2>
    <form id="matricula-form">
        <div class="form-row-name">
            <div>
                <label for="nome-completo">Nome Completo <span style="color: red;">*</span></label>
                <input type="text" id="nome-completo" name="nome-completo" required>
            </div>
            <div class="check-container">
                <input type="checkbox" id="nome-social" name="nome-social">
                <label for="nome-social">Nome Social</label>
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="data-nascimento">Data de Nascimento <span style="color: red;">*</span></label>
                <input type="date" id="data-nascimento" name="data-nascimento" required>
            </div>
            <div>
                <label for="telefone">Número de Telefone <span style="color: red;">*</span></label>
                <input type="tel" id="telefone" name="telefone" required>
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="rg">RG <span style="color: red;">*</span></label>
                <input type="text" id="rg" name="rg" required>
            </div>
            <div>
                <label for="cpf">CPF <span style="color: red;">*</span></label>
                <input type="text" id="cpf" name="cpf" required>
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="endereco">Endereço <span style="color: red;">*</span></label>
                <input type="text" id="endereco" name="endereco" required>
            </div>
            <div>
                <label for="bairro">Bairro <span style="color: red;">*</span></label>
                <input type="text" id="bairro" name="bairro" required>
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="estado">Estado <span style="color: red;">*</span></label>
                <select id="estado" name="estado" required>
                    <option value="">Selecione</option>
                    <option value="AC">Acre</option>
                    <option value="AL">Alagoas</option>
                    <option value="AP">Amapá</option>
                    <option value="AM">Amazonas</option>
                    <option value="BA">Bahia</option>
                    <option value="CE">Ceará</option>
                    <option value="DF">Distrito Federal</option>
                    <option value="ES">Espírito Santo</option>
                    <option value="GO">Goiás</option>
                    <option value="MA">Maranhão</option>
                    <option value="MT">Mato Grosso</option>
                    <option value="MS">Mato Grosso do Sul</option>
                    <option value="MG">Minas Gerais</option>
                    <option value="PA">Pará</option>
                    <option value="PB">Paraíba</option>
                    <option value="PR">Paraná</option>
                    <option value="PE">Pernambuco</option>
                    <option value="PI">Piauí</option>
                    <option value="RJ">Rio de Janeiro</option>
                    <option value="RN">Rio Grande do Norte</option>
                    <option value="RS">Rio Grande do Sul</option>
                    <option value="RO">Rondônia</option>
                    <option value="RR">Roraima</option>
                    <option value="SC">Santa Catarina</option>
                    <option value="SP">São Paulo</option>
                    <option value="SE">Sergipe</option>
                    <option value="TO">Tocantins</option>
                </select>
            </div>
            <div>
                <label for="email">Email <span style="color: red;">*</span></label>
                <input type="email" id="email" name="email" required>
            </div>
        </div>

        <div class="form-row">
            <div>
                <label for="como-soube">Como soube da escola? <span style="color: red;">*</span></label>
                <select id="como-soube" name="como-soube" required>
                    <option value="">Selecione</option>
                    <option value="amigo">Amigo</option>
                    <option value="internet">Internet</option>
                    <option value="redes-sociais">Redes Sociais</option>
                    <option value="outro">Outro</option>
                </select>
            </div>
            <div>
                <label for="responsavel">Nome do Responsável <span style="color: red;">*</span></label>
                <input type="text" id="responsavel" name="responsavel" required>
            </div>
        </div>

        <!-- Novo campo de seleção para o curso -->
        <div class="form-row">
            <div>
                <label for="curso">Curso Desejado <span style="color: red;">*</span></label>
                <select id="curso" name="curso" required>
                    <option value="">Selecione um curso</option>
                    <option value="ingles">Inglês</option>
                    <option value="espanhol">Espanhol</option>
                    <option value="frances">Francês</option>
                    <option value="alemao">Alemão</option>
                    <option value="italiano">Italiano</option>
                    <option value="italiano">Mandarim</option>
                </select>
            </div>
        </div>

        <button type="submit">Enviar</button>
    </form>
    <p id="mensagem-sucesso" style="color: green; display: none;">Matrícula realizada com sucesso!</p>
</div>

<script>
    document.getElementById('matricula-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Previne o envio padrão do formulário

        // Validação dos campos obrigatórios
        let camposValidos = true;
        const campos = document.querySelectorAll('input[required], select[required]');
        
        campos.forEach(function(campo) {
            if (!campo.value) {
                campo.style.border = '1px solid red'; // Destaca os campos obrigatórios não preenchidos
                camposValidos = false;
            } else {
                campo.style.border = ''; // Limpa o estilo se o campo estiver preenchido
            }
        });

        if (camposValidos) {
            // Coletar dados do formulário
            const formData = new FormData(document.getElementById('matricula-form'));

            // Converter FormData em um objeto
            const data = {};
            formData.forEach((value, key) => {
                data[key.replace(/-/g, '')] = value; // Remove os traços do nome da propriedade
            });

            // Enviar dados para o servidor
            fetch('http://localhost:3000/matricula', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Erro ao realizar matrícula.');
                }
                return response.text();
            })
            .then(message => {
                document.getElementById('mensagem-sucesso').innerText = message;
                document.getElementById('mensagem-sucesso').style.display = 'block';
                document.getElementById('matricula-form').reset(); // Limpa o formulário após o envio
                setTimeout(function() {
                    document.getElementById('mensagem-sucesso').style.display = 'none';
                }, 3000); // Esconde a mensagem após 3 segundos
            })
            .catch(error => {
                alert(error.message);
            });
        }
    });
</script>


</body>
</html>
